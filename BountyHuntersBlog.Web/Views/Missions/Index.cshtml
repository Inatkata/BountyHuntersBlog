@model BountyHuntersBlog.ViewModels.Missions.MissionIndexViewModel

<h2 class="mb-3">Missions</h2>

<form method="get" class="row g-2 mb-4">
    <div class="col-md-4"><input asp-for="Q" class="form-control" placeholder="Search..." /></div>
    <div class="col-md-3">
        <select asp-for="CategoryId" class="form-select" asp-items="Model.Categories">
            <option value="">-- All categories --</option>
        </select>
    </div>
    <div class="col-md-3">
        <select asp-for="TagId" class="form-select" asp-items="Model.Tags">
            <option value="">-- All tags --</option>
        </select>
    </div>
    <div class="col-md-2"><button class="btn btn-primary w-100" type="submit">Filter</button></div>
</form>

@if (!Model.Items.Any())
{
    <div class="alert alert-info">No missions found.</div>
}
else
{
    <div class="row row-cols-1 row-cols-md-3 g-3">
        @foreach (var m in Model.Items)
        {
            @await Html.PartialAsync("_MissionCard", m)
        }
    </div>

    @{
        var pager = new BountyHuntersBlog.ViewModels.Shared.PaginationViewModel {
            Page = Model.Page, PageSize = Model.PageSize, TotalCount = Model.TotalCount,
            Action = "Index", Controller = "Missions",
            RouteValues = new { q = Model.Q, categoryId = Model.CategoryId, tagId = Model.TagId }
        };
    }
    <partial name="~/Views/Shared/_Pagination.cshtml" model="pager" />
}